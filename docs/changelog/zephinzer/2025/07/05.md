# Updates made on 4th July 2025

- [x] Update `TelegramApprover` to be a `Notifier` that is generalised as a `Notifier` interface similar to the `Cache`
- [x] Add a default response for the Telegram integration and allow for addition of handlers
- [x] After sending a messsage, retrieve the message ID and save it in the cache. When retrieving the key from the cache, verify that the callback query's message ID is the same as the message ID we sent it with
  - Need to save the message ID sent by the notifier so that we know the callback data is coming from the latest, if the message ID doesn't match, reject the approval from the system-side
- [x] After approval/rejection, remove the callback buttons from the message using the message ID saved, leave behind the request ID only

## Next time:

- [ ] Implement endpoint for retrieving an approval by it's ID which should return it's status including approval status
  - This is so that the consumer can do up a polling mechanism that queries this endpoint to retrieve the status instead of waiting on the transaction which can fail for networking reasons
- [ ] Implement a timeout/TTL feature in the approval request creation, once timeout is reached, the approval request becomes invalid and any approval/rejection action on it will change the message to indicate that it's no longer valid
  - Perhaps implement a job that routinely updates the messages of invalid jobs
  - The expiry set on the cache should be AFTER the message's programmatically set TTL
- [ ] Implement notification of the end-user when a system error happens during approval/rejection
- [ ] Update the `.Approval` property to include the approver and details about the approval/rejection action
